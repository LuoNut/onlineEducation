(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/online_note/edit"],{1007:function(t,e,n){},1946:function(t,e,n){"use strict";(function(t,o){var i=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=i(n("2eee")),a=i(n("c973")),s=(n("325c"),t.database()),u={data:function(){return{showTool:!1,showHeader:!1,showBold:!1,showItalic:!1,noteId:"",content:""}},onLoad:function(t){this.noteId=t.id,this.getOnteFun()},methods:{getOnteFun:function(){var t=this;return(0,a.default)(c.default.mark((function e(){var n;return c.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.collection("online_note").where('"'.concat(t.noteId,'" == _id')).get();case 2:n=e.sent,t.content=n.result.data[0].content,setTimeout((function(){t.editorCtx.setContents({html:n.result.data[0].content,success:function(e){t.content=e.html,console.log(n.result.data[0].content)}})}));case 5:case"end":return e.stop()}}),e)})))()},onSubmit:function(){var t=this;this.editorCtx.getContents({success:function(e){t.content=e.html,t.setData()}})},setData:function(){s.collection("online_note").update({content:this.content}).then((function(t){console.log(t),o.showToast({title:"上传成功",icon:"none"})}))},onfocus:function(){this.showTool=!0},onEditReady:function(){var t=this;o.createSelectorQuery().in(this).select(".myEdit").fields({size:!0,context:!0},(function(e){t.editorCtx=e.context})).exec()},clickDivider:function(){this.editorCtx.insertDivider()},clickHeader:function(){this.showHeader=!this.showHeader,this.editorCtx.format("header",!!this.showHeader&&"H1")},clickBold:function(){this.showBold=!this.showBold,this.editorCtx.format("bold")},clickItalic:function(){this.showItalic=!this.showItalic,this.editorCtx.format("italic")},clickInsertImage:function(){var e=this;o.chooseImage({success:function(n){o.showLoading({title:"上传中...",mask:!0}),n.tempFiles.forEach(function(){var n=(0,a.default)(c.default.mark((function n(i){var a;return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.uploadFile({filePath:i.path,cloudPath:i.name});case 2:a=n.sent,e.editorCtx.insertImage({src:a.fileID}),o.hideLoading();case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}})},okEdit:function(){this.showTool=!1},checkStatus:function(t,e,n){e.hasOwnProperty(t)?this[n]=!0:this[n]=!1},statuschange:function(t){var e=t.detail;this.checkStatus("header",e,"showHeader"),this.checkStatus("bold",e,"showBold"),this.checkStatus("italic",e,"showItalic")}}};e.default=u}).call(this,n("a9ff")["default"],n("543d")["default"])},"5fc7":function(t,e,n){"use strict";n.r(e);var o=n("6488"),i=n("cbfb");for(var c in i)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(c);n("8608");var a=n("f0c5"),s=Object(a["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);e["default"]=s.exports},6488:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return o}));var o={uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"78d4"))}},i=function(){var t=this.$createElement;this._self._c},c=[]},8608:function(t,e,n){"use strict";var o=n("1007"),i=n.n(o);i.a},b8ac:function(t,e,n){"use strict";(function(t,e){var o=n("4ea4");n("dac0"),n("a9ff");o(n("66fd"));var i=o(n("5fc7"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},cbfb:function(t,e,n){"use strict";n.r(e);var o=n("1946"),i=n.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(c);e["default"]=i.a}},[["b8ac","common/runtime","common/vendor"]]]);