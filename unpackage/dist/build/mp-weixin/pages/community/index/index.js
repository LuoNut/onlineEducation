(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/community/index/index"],{"29e8":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return a})),n.d(t,"a",(function(){return o}));var o={uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,"91d9"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"163c"))},uSkeleton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-skeleton/u-skeleton")]).then(n.bind(null,"1c88"))},blogItem:function(){return Promise.all([n.e("common/vendor"),n.e("components/blog-item/blog-item")]).then(n.bind(null,"70a9"))},uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,"e453"))}},i=function(){var e=this.$createElement;this._self._c},a=[]},"5a5c":function(e,t,n){"use strict";(function(e,t){var o=n("4ea4");n("dac0"),n("a9ff");o(n("66fd"));var i=o(n("f15d"));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},7365:function(e,t,n){"use strict";(function(e,o){var i=n("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("2eee")),c=i(n("448a")),u=i(n("c973")),r=n("606a"),s=e.database(),l=s.command,d={data:function(){return{show:!1,subject_type:"computer",navList:[{name:"计算机",subject_type:"computer"},{name:"理学,工学,农学",subject_type:"ScienceEngineeringAgronomy"},{name:"外语",subject_type:"foreignLanguages"},{name:"心理学",subject_type:"fpsychology"},{name:"文史哲学",subject_type:"LiteratureHistoryPhilosophy"},{name:"音乐与艺术",subject_type:"MusicAndArt"},{name:"医学与保健",subject_type:"MedicineHealthCare"},{name:"教育教学",subject_type:"educationTeaching"}],loadingState:!0,navActive:0,articleData:[],uniLoad:"more",isBottomLoading:!1,noMore:!1}},onReachBottom:function(){this.ReachBottom()},onLoad:function(){this.getArticleData()},onShow:function(){this.getArticleData()},methods:{showNavAll:function(){this.show=!this.show},close:function(){this.show=!1},ReachBottom:function(){this.isBottomLoading=!0,this.uniLoad="loading",this.noMore?this.uniLoad="noMore":this.getArticleData()},P_delEvent:function(){this.articleData=[],this.getArticleData()},getArticleData:function(){var t=this;return(0,u.default)(a.default.mark((function n(){var o,i;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=s.collection("blog_article").where("delState != true && '".concat(t.subject_type,"' == subject_type")).field("user_id,like_count,view_count,comment_count,title,publish_date,description,picurls,province").getTemp(),n.next=3,s.collection("uni-id-users").field("_id,username,nickname,avatar_file").getTemp();case 3:i=n.sent,s.collection(o,i).orderBy(t.navList[t.navActive].type,"desc").skip(t.articleData.length).limit(5).get().then(function(){var n=(0,u.default)(a.default.mark((function n(o){var i,u,d,f;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.loadingState=!1,o.result.data.length){n.next=5;break}return t.ReachBottom(),t.noMore=!0,n.abrupt("return");case 5:if(i=t.articleData,u=[],d=[].concat((0,c.default)(i),(0,c.default)(o.result.data)),!r.store.hasLogin){n.next=16;break}return d.forEach((function(e){u.push(e._id)})),console.log(u),n.next=13,s.collection("blog_like").where({article_id:l.in(u),user_id:e.getCurrentUserInfo().uid}).get();case 13:f=n.sent,console.log(f),f.result.data.forEach((function(e){var t=d.findIndex((function(t){return e.article_id===t._id}));console.log(t),d[t].isLike=!0}));case 16:t.articleData=d,t.loadingState=!1,console.log(d);case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 5:case"end":return n.stop()}}),n)})))()},navClick:function(e){this.show=!1,this.subject_type=e.subject_type,console.log(this.subject_type),this.loadingState=!0,this.articleData=[],this.navActive=e.index,this.getArticleData(),this.uniLoad="more",this.noMore=!1,this.isBottomLoading=!1},toEdit:function(){o.navigateTo({url:"/pages/community/edit/edit?subject_type="+this.subject_type})}}};t.default=d}).call(this,n("a9ff")["default"],n("543d")["default"])},bb6f:function(e,t,n){},d399:function(e,t,n){"use strict";n.r(t);var o=n("7365"),i=n.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=i.a},e706:function(e,t,n){"use strict";var o=n("bb6f"),i=n.n(o);i.a},f15d:function(e,t,n){"use strict";n.r(t);var o=n("29e8"),i=n("d399");for(var a in i)["default"].indexOf(a)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(a);n("e706");var c=n("f0c5"),u=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,"7bcc2bbc",null,!1,o["a"],void 0);t["default"]=u.exports}},[["5a5c","common/runtime","common/vendor"]]]);