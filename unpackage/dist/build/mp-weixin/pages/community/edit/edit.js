(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/community/edit/edit"],{"2ca2":function(t,e,n){"use strict";var i=n("571b"),o=n.n(i);o.a},3545:function(t,e,n){"use strict";(function(t,i){var o=n("4ea4");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=o(n("2eee")),r=o(n("c973")),a=o(n("9523")),s=n("325c");function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}var l=t.database(),d={data:function(){return{showTool:!1,showHeader:!1,showBold:!1,showItalic:!1,artobj:{title:"",content:"",description:"",picurls:[],province:"",subject_type:""}}},onLoad:function(t){var e=this;this.artobj.subject_type=t.subject_type,(0,s.getProvince)().then((function(t){e.artobj.province=t}))},methods:{onSubmit:function(){var t=this;i.showLoading({title:"发布中..."}),this.editorCtx.getContents({success:function(e){t.artobj.content=e.html,t.artobj.description=e.text.slice(0,80),t.artobj.picurls=(0,s.getImgSrc)(e.html),t.setData()}})},setData:function(){l.collection("blog_article").add(function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,a.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.artobj)).then((function(t){i.hideLoading(),i.showToast({title:"发布成功"}),setTimeout((function(){i.navigateBack({delta:1})}),800)}))},onfocus:function(){this.showTool=!0},onEditReady:function(){var t=this;i.createSelectorQuery().in(this).select(".myEdit").fields({size:!0,context:!0},(function(e){t.editorCtx=e.context})).exec()},clickDivider:function(){this.editorCtx.insertDivider()},clickHeader:function(){this.showHeader=!this.showHeader,this.editorCtx.format("header",!!this.showHeader&&"H1")},clickBold:function(){this.showBold=!this.showBold,this.editorCtx.format("bold")},clickItalic:function(){this.showItalic=!this.showItalic,this.editorCtx.format("italic")},clickInsertImage:function(){var e=this;i.chooseImage({success:function(n){i.showLoading({title:"上传中...",mask:!0}),n.tempFiles.forEach(function(){var n=(0,r.default)(c.default.mark((function n(o){var r;return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.uploadFile({filePath:o.path,cloudPath:o.name});case 2:r=n.sent,e.editorCtx.insertImage({src:r.fileID}),i.hideLoading();case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}})},okEdit:function(){this.showTool=!1},checkStatus:function(t,e,n){e.hasOwnProperty(t)?this[n]=!0:this[n]=!1},statuschange:function(t){var e=t.detail;this.checkStatus("header",e,"showHeader"),this.checkStatus("bold",e,"showBold"),this.checkStatus("italic",e,"showItalic")}}};e.default=d}).call(this,n("a9ff")["default"],n("543d")["default"])},"571b":function(t,e,n){},"9e0c":function(t,e,n){"use strict";(function(t,e){var i=n("4ea4");n("dac0"),n("a9ff");i(n("66fd"));var o=i(n("ce37"));t.__webpack_require_UNI_MP_PLUGIN__=n,e(o.default)}).call(this,n("bc2e")["default"],n("543d")["createPage"])},b1d1:function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c})),n.d(e,"a",(function(){return i}));var i={uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,"78d4"))}},o=function(){var t=this.$createElement,e=(this._self._c,this.artobj.title.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},c=[]},ce37:function(t,e,n){"use strict";n.r(e);var i=n("b1d1"),o=n("eeeb");for(var c in o)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(c);n("2ca2");var r=n("f0c5"),a=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);e["default"]=a.exports},eeeb:function(t,e,n){"use strict";n.r(e);var i=n("3545"),o=n.n(i);for(var c in i)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(c);e["default"]=o.a}},[["9e0c","common/runtime","common/vendor"]]]);