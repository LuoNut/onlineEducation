(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-id-pages/pages/login/login-withpwd"],{"0a3b":function(e,n,t){"use strict";(function(e,i){var a=t("4ea4");Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=a(t("472c")),s=e.importObject("uni-id-co",{errorOptions:{type:"toast"}}),o={mixins:[u.default],data:function(){return{password:"",username:"",captcha:"",needCaptcha:!1,focusUsername:!1,focusPassword:!1,logo:"/static/logo.png"}},onShow:function(){},methods:{toRetrievePwd:function(){var e="/uni_modules/uni-id-pages/pages/retrieve/retrieve";/^1\d{10}$/.test(this.username)&&(e+="?phoneNumber=".concat(this.username)),i.navigateTo({url:e})},pwdLogin:function(){var e=this;if(!this.password.length)return this.focusPassword=!0,i.showToast({title:"请输入密码",icon:"none",duration:3e3});if(!this.username.length)return this.focusUsername=!0,i.showToast({title:"请输入手机号/用户名/邮箱",icon:"none",duration:3e3});if(this.needCaptcha&&4!=this.captcha.length)return this.$refs.captcha.getImageCaptcha(),i.showToast({title:"请输入验证码",icon:"none",duration:3e3});if(this.needAgreements&&!this.agree)return this.$refs.agreements.popup(this.pwdLogin);var n={password:this.password,captcha:this.captcha};/^1\d{10}$/.test(this.username)?n.mobile=this.username:/@/.test(this.username)?n.email=this.username:n.username=this.username,s.login(n).then((function(n){e.loginSuccess(n),e.uniIDHasRole("admin")||e.uniIDHasRole("teacher")?e.$store.commit("setRoleId",1):e.$store.commit("setRoleId",0)})).catch((function(n){"uni-id-captcha-required"==n.errCode?e.needCaptcha=!0:e.needCaptcha&&e.$refs.captcha.getImageCaptcha()}))},toRegister:function(){i.navigateTo({url:this.config.isAdmin?"/uni_modules/uni-id-pages/pages/register/register-admin":"/uni_modules/uni-id-pages/pages/register/register",fail:function(e){console.error(e)}})}}};n.default=o}).call(this,t("a9ff")["default"],t("543d")["default"])},6391:function(e,n,t){"use strict";(function(e,n){var i=t("4ea4");t("dac0"),t("a9ff");i(t("66fd"));var a=i(t("e788"));e.__webpack_require_UNI_MP_PLUGIN__=t,n(a.default)}).call(this,t("bc2e")["default"],t("543d")["createPage"])},"97a8":function(e,n,t){"use strict";t.d(n,"b",(function(){return a})),t.d(n,"c",(function(){return u})),t.d(n,"a",(function(){return i}));var i={uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,"22dd"))},uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,"2d4f"))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,"fcc1"))},uniCaptcha:function(){return t.e("uni_modules/uni-captcha/components/uni-captcha/uni-captcha").then(t.bind(null,"79da"))},uniIdPagesAgreements:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-agreements/uni-id-pages-agreements").then(t.bind(null,"c7e4"))},uniIdPagesFabLogin:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-fab-login/uni-id-pages-fab-login").then(t.bind(null,"39fa"))}},a=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.focusUsername=!1},e.e1=function(n){e.focusPassword=!1})},u=[]},b48d:function(e,n,t){"use strict";var i=t("e7df"),a=t.n(i);a.a},e788:function(e,n,t){"use strict";t.r(n);var i=t("97a8"),a=t("fc48");for(var u in a)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return a[e]}))}(u);t("b48d");var s=t("f0c5"),o=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"942b98a4",null,!1,i["a"],void 0);n["default"]=o.exports},e7df:function(e,n,t){},fc48:function(e,n,t){"use strict";t.r(n);var i=t("0a3b"),a=t.n(i);for(var u in i)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(u);n["default"]=a.a}},[["6391","common/runtime","common/vendor"]]]);