(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-id-pages/pages/login/login-withpwd"],{246:function(e,n,t){"use strict";(function(e,n){var i=t(4);t(26),t(27);i(t(25));var o=i(t(247));e.__webpack_require_UNI_MP_PLUGIN__=t,n(o.default)}).call(this,t(1)["default"],t(2)["createPage"])},247:function(e,n,t){"use strict";t.r(n);var i=t(248),o=t(250);for(var s in o)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(s);t(252);var r,u=t(46),a=Object(u["default"])(o["default"],i["render"],i["staticRenderFns"],!1,null,"9dec0b32",null,!1,i["components"],r);a.options.__file="uni_modules/uni-id-pages/pages/login/login-withpwd.vue",n["default"]=a.exports},248:function(e,n,t){"use strict";t.r(n);var i=t(249);t.d(n,"render",(function(){return i["render"]})),t.d(n,"staticRenderFns",(function(){return i["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return i["recyclableRender"]})),t.d(n,"components",(function(){return i["components"]}))},249:function(e,n,t){"use strict";var i;t.r(n),t.d(n,"render",(function(){return o})),t.d(n,"staticRenderFns",(function(){return r})),t.d(n,"recyclableRender",(function(){return s})),t.d(n,"components",(function(){return i}));try{i={uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,660))},uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,669))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,617))},uniCaptcha:function(){return t.e("uni_modules/uni-captcha/components/uni-captcha/uni-captcha").then(t.bind(null,676))},uniIdPagesAgreements:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-agreements/uni-id-pages-agreements").then(t.bind(null,646))},uniIdPagesFabLogin:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-fab-login/uni-id-pages-fab-login").then(t.bind(null,653))}}}catch(u){if(-1===u.message.indexOf("Cannot find module")||-1===u.message.indexOf(".vue"))throw u;console.error(u.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var o=function(){var e=this,n=e.$createElement;e._self._c;e._isMounted||(e.e0=function(n){e.focusUsername=!1},e.e1=function(n){e.focusPassword=!1})},s=!1,r=[];o._withStripped=!0},250:function(e,n,t){"use strict";t.r(n);var i=t(251),o=t.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(s);n["default"]=o.a},251:function(e,n,t){"use strict";(function(e,i){var o=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=o(t(243)),r=e.importObject("uni-id-co",{errorOptions:{type:"toast"}}),u={mixins:[s.default],data:function(){return{password:"",username:"",captcha:"",needCaptcha:!1,focusUsername:!1,focusPassword:!1,logo:"/static/logo.png"}},onShow:function(){},methods:{toRetrievePwd:function(){var e="/uni_modules/uni-id-pages/pages/retrieve/retrieve";/^1\d{10}$/.test(this.username)&&(e+="?phoneNumber=".concat(this.username)),i.navigateTo({url:e})},pwdLogin:function(){var e=this;if(!this.password.length)return this.focusPassword=!0,i.showToast({title:"请输入密码",icon:"none",duration:3e3});if(!this.username.length)return this.focusUsername=!0,i.showToast({title:"请输入手机号/用户名/邮箱",icon:"none",duration:3e3});if(this.needCaptcha&&4!=this.captcha.length)return this.$refs.captcha.getImageCaptcha(),i.showToast({title:"请输入验证码",icon:"none",duration:3e3});if(this.needAgreements&&!this.agree)return this.$refs.agreements.popup(this.pwdLogin);var n={password:this.password,captcha:this.captcha};/^1\d{10}$/.test(this.username)?n.mobile=this.username:/@/.test(this.username)?n.email=this.username:n.username=this.username,r.login(n).then((function(n){e.loginSuccess(n),e.uniIDHasRole("admin")||e.uniIDHasRole("teacher")?e.$store.commit("setRoleId",1):e.$store.commit("setRoleId",0)})).catch((function(n){"uni-id-captcha-required"==n.errCode?e.needCaptcha=!0:e.needCaptcha&&e.$refs.captcha.getImageCaptcha()}))},toRegister:function(){i.navigateTo({url:this.config.isAdmin?"/uni_modules/uni-id-pages/pages/register/register-admin":"/uni_modules/uni-id-pages/pages/register/register",fail:function(e){console.error(e)}})}}};n.default=u}).call(this,t(27)["default"],t(2)["default"])},252:function(e,n,t){"use strict";t.r(n);var i=t(253),o=t.n(i);for(var s in i)["default"].indexOf(s)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(s);n["default"]=o.a},253:function(e,n,t){}},[[246,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/pages/login/login-withpwd.js.map