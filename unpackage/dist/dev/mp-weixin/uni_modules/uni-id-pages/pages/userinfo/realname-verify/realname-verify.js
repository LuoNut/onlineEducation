(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-id-pages/pages/userinfo/realname-verify/realname-verify"],{326:function(e,n,t){"use strict";(function(e,n){var r=t(4);t(26),t(27);r(t(25));var i=r(t(327));e.__webpack_require_UNI_MP_PLUGIN__=t,n(i.default)}).call(this,t(1)["default"],t(2)["createPage"])},327:function(e,n,t){"use strict";t.r(n);var r=t(328),i=t(330);for(var u in i)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(u);t(335);var a,o=t(46),s=Object(o["default"])(i["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],a);s.options.__file="uni_modules/uni-id-pages/pages/userinfo/realname-verify/realname-verify.vue",n["default"]=s.exports},328:function(e,n,t){"use strict";t.r(n);var r=t(329);t.d(n,"render",(function(){return r["render"]})),t.d(n,"staticRenderFns",(function(){return r["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return r["recyclableRender"]})),t.d(n,"components",(function(){return r["components"]}))},329:function(e,n,t){"use strict";var r;t.r(n),t.d(n,"render",(function(){return i})),t.d(n,"staticRenderFns",(function(){return a})),t.d(n,"recyclableRender",(function(){return u})),t.d(n,"components",(function(){return r}));try{r={uniList:function(){return t.e("uni_modules/uni-list/components/uni-list/uni-list").then(t.bind(null,577))},uniListItem:function(){return t.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(t.bind(null,584))},uniForms:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-forms/components/uni-forms/uni-forms")]).then(t.bind(null,660))},uniFormsItem:function(){return t.e("uni_modules/uni-forms/components/uni-forms-item/uni-forms-item").then(t.bind(null,669))},uniEasyinput:function(){return t.e("uni_modules/uni-easyinput/components/uni-easyinput/uni-easyinput").then(t.bind(null,617))},uniIdPagesAgreements:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-agreements/uni-id-pages-agreements").then(t.bind(null,646))}}}catch(o){if(-1===o.message.indexOf("Cannot find module")||-1===o.message.indexOf(".vue"))throw o;console.error(o.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,n=e.$createElement;e._self._c},u=!1,a=[];i._withStripped=!0},330:function(e,n,t){"use strict";t.r(n);var r=t(331),i=t.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(u);n["default"]=i.a},331:function(e,n,t){"use strict";(function(e,r){var i=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var u=i(t(332)),a=i(t(28)),o=i(t(31)),s=(i(t(334)),i(t(243))),c=t(42),l=["errCode"],f=e.importObject("uni-id-co"),d="uni-id-pages-temp-frv",m={mixins:[s.default],data:function(){return{realName:"",idCard:"",certifyId:"",verifyFail:!1,verifyFailCode:0,verifyFailTitle:"",verifyFailContent:""}},computed:{userInfo:function(){return c.store.userInfo},certifyIdNext:function(){return Boolean(this.realName)&&Boolean(this.idCard)&&this.needAgreements&&this.agree},isCertify:function(){return this.userInfo.realNameAuth&&2===this.userInfo.realNameAuth.authStatus},isDev:function(){return!0}},onLoad:function(){var e=r.getStorageSync(d);e&&(this.realName=e.realName,this.idCard=e.idCard)},methods:{getCertifyId:function(){var e=this;return(0,o.default)(a.default.mark((function n(){var t,i;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(e.certifyIdNext){n.next=2;break}return n.abrupt("return");case 2:return n.abrupt("return",r.showModal({content:"暂不支持实名认证",showCancel:!1}));case 6:if(!("string"!==typeof e.realName||e.realName.length<2)&&/^[\u4e00-\u9fa5]{1,10}(·?[\u4e00-\u9fa5]{1,10}){0,5}$/.test(e.realName)){n.next=9;break}return r.showToast({title:"姓名只能是汉字",icon:"none"}),n.abrupt("return");case 9:return r.setStorage({key:d,data:{realName:e.realName,idCard:e.idCard}}),t=r.getFacialRecognitionMetaInfo(),n.next=13,f.getFrvCertifyId({realName:e.realName,idCard:e.idCard,metaInfo:t});case 13:i=n.sent,e.certifyId=i.certifyId,e.startFacialRecognitionVerify();case 16:case"end":return n.stop()}}),n)})))()},startFacialRecognitionVerify:function(){},getFrvAuthResult:function(){var n=this;return(0,o.default)(a.default.mark((function t(){var i,o,s;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=e.importObject("uni-id-co",{customUI:!0}),t.prev=1,r.showLoading({title:"验证中...",mask:!1}),t.next=5,i.getFrvAuthResult({certifyId:n.certifyId});case 5:o=t.sent,o.errCode,s=(0,u.default)(o,l),n.verifyFailContent&&console.log("[frv-debug] 客户端刷脸失败，由实人认证服务查询具体原因，原因：".concat(n.verifyFailContent)),r.showModal({content:"实名认证成功",showCancel:!1,success:function(){c.mutations.setUserInfo({realNameAuth:s}),n.verifyFail=!1}}),r.removeStorage({key:d}),t.next=17;break;case 12:t.prev=12,t.t0=t["catch"](1),n.verifyFail=!0,n.verifyFailTitle=t.t0.errMsg,console.error(JSON.stringify(t.t0));case 17:return t.prev=17,r.hideLoading(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[1,12,17,20]])})))()},retry:function(){10013!==this.verifyFailCode?this.getCertifyId():this.verifyFail=!1}}};n.default=m}).call(this,t(27)["default"],t(2)["default"])},335:function(e,n,t){"use strict";t.r(n);var r=t(336),i=t.n(r);for(var u in r)["default"].indexOf(u)<0&&function(e){t.d(n,e,(function(){return r[e]}))}(u);n["default"]=i.a},336:function(e,n,t){}},[[326,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/pages/userinfo/realname-verify/realname-verify.js.map