(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["uni_modules/uni-id-pages/pages/userinfo/userinfo"],{213:function(e,n,t){"use strict";(function(e,n){var i=t(4);t(26),t(27);i(t(25));var u=i(t(214));e.__webpack_require_UNI_MP_PLUGIN__=t,n(u.default)}).call(this,t(1)["default"],t(2)["createPage"])},214:function(e,n,t){"use strict";t.r(n);var i=t(215),u=t(217);for(var o in u)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return u[e]}))}(o);t(219);var a,r=t(46),s=Object(r["default"])(u["default"],i["render"],i["staticRenderFns"],!1,null,"451985ee",null,!1,i["components"],a);s.options.__file="uni_modules/uni-id-pages/pages/userinfo/userinfo.vue",n["default"]=s.exports},215:function(e,n,t){"use strict";t.r(n);var i=t(216);t.d(n,"render",(function(){return i["render"]})),t.d(n,"staticRenderFns",(function(){return i["staticRenderFns"]})),t.d(n,"recyclableRender",(function(){return i["recyclableRender"]})),t.d(n,"components",(function(){return i["components"]}))},216:function(e,n,t){"use strict";var i;t.r(n),t.d(n,"render",(function(){return u})),t.d(n,"staticRenderFns",(function(){return a})),t.d(n,"recyclableRender",(function(){return o})),t.d(n,"components",(function(){return i}));try{i={uniIdPagesAvatar:function(){return t.e("uni_modules/uni-id-pages/components/uni-id-pages-avatar/uni-id-pages-avatar").then(t.bind(null,570))},uniList:function(){return t.e("uni_modules/uni-list/components/uni-list/uni-list").then(t.bind(null,577))},uniListItem:function(){return t.e("uni_modules/uni-list/components/uni-list-item/uni-list-item").then(t.bind(null,584))},uniDataCheckbox:function(){return t.e("uni_modules/uni-data-checkbox/components/uni-data-checkbox/uni-data-checkbox").then(t.bind(null,591))},uniPopup:function(){return t.e("uni_modules/uni-popup/components/uni-popup/uni-popup").then(t.bind(null,598))},uniPopupDialog:function(){return Promise.all([t.e("common/vendor"),t.e("uni_modules/uni-popup/components/uni-popup-dialog/uni-popup-dialog")]).then(t.bind(null,605))}}}catch(r){if(-1===r.message.indexOf("Cannot find module")||-1===r.message.indexOf(".vue"))throw r;console.error(r.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var u=function(){var e=this,n=e.$createElement;e._self._c},o=!1,a=[];u._withStripped=!0},217:function(e,n,t){"use strict";t.r(n);var i=t(218),u=t.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);n["default"]=u.a},218:function(e,n,t){"use strict";(function(e,i){var u=t(4);Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=u(t(28)),a=u(t(31)),r=t(42),s=e.importObject("uni-id-co"),c={computed:{userInfo:function(){return r.store.userInfo},realNameStatus:function(){return this.userInfo.realNameAuth?this.userInfo.realNameAuth.authStatus:0}},data:function(){return{range:[{value:"student",text:"学习者",disable:!0},{value:"teacher",text:"教师"}],uservalue:"",univerifyStyle:{authButton:{title:"本机号码一键绑定"},otherLoginButton:{title:"其他号码绑定"}},hasPwd:!1,showLoginManage:!1,setNicknameIng:!1}},onShow:function(){var e=this;return(0,a.default)(o.default.mark((function n(){return o.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.univerifyStyle.authButton.title="本机号码一键绑定",e.univerifyStyle.otherLoginButton.title="其他号码绑定";case 2:case"end":return n.stop()}}),n)})))()},onLoad:function(e){var n=this;return(0,a.default)(o.default.mark((function t(){var i;return o.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.showLoginManage&&(n.showLoginManage=!0),t.next=3,s.getAccountInfo();case 3:i=t.sent,n.hasPwd=i.isPasswordSet,n.uservalue=n.uniIDHasRole("teacher")?"teacher":"student";case 6:case"end":return t.stop()}}),t)})))()},methods:{groupChange:function(e){var n=this;console.log("e:",e.detail.data.value),"teacher"==e.detail.data.value&&i.showModal({title:"是否申请教师身份?",success:function(t){t.confirm?(r.mutations.updateUserInfo({userType:e.detail.data.value}),i.showToast({title:"已经成功申请，请等待管理员审核",icon:"none"}),n.uservalue="student"):t.cancel&&(console.log(n.uservalue),n.uservalue="student")}})},login:function(){i.navigateTo({url:"/uni_modules/uni-id-pages/pages/login/login-withoutpwd",complete:function(e){}})},logout:function(){r.mutations.logout()},bindMobileSuccess:function(){r.mutations.updateUserInfo()},changePassword:function(){i.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/change_pwd/change_pwd",complete:function(e){}})},bindMobile:function(){this.$refs["bind-mobile-by-sms"].open()},univerify:function(){var e=this;i.login({provider:"univerify",univerifyStyle:this.univerifyStyle,success:function(){var e=(0,a.default)(o.default.mark((function e(n){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:s.bindMobileByUniverify(n.authResult).then((function(e){r.mutations.updateUserInfo()})).catch((function(e){console.log(e)})).finally((function(e){i.closeAuthView()}));case 1:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}(),fail:function(n){console.log(n),"30002"!=n.code&&"30001"!=n.code||e.bindMobileBySmsCode()}})},bindMobileBySmsCode:function(){i.navigateTo({url:"./bind-mobile/bind-mobile"})},setNickname:function(e){console.log(this.userInfo),e?(r.mutations.updateUserInfo({name:e}),this.setNicknameIng=!1,this.$refs.dialog.close()):this.$refs.dialog.open()},setUserType:function(e){console.log(this.userInfo),e?(r.mutations.updateUserInfo({name:e}),this.setNicknameIng=!1,this.$refs.dialog.close()):this.$refs.dialog.open()},deactivate:function(){i.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/deactivate/deactivate"})},bindThirdAccount:function(n){var t=this;return(0,a.default)(o.default.mark((function u(){var s,c;return o.default.wrap((function(u){while(1)switch(u.prev=u.next){case 0:if(s=e.importObject("uni-id-co"),c={weixin:"wx_openid",alipay:"ali_openid",apple:"apple_openid",qq:"qq_openid"}[n.toLowerCase()],!t.userInfo[c]){u.next=9;break}return u.next=5,s["unbind"+n]();case 5:return u.next=7,r.mutations.updateUserInfo();case 7:u.next=10;break;case 9:i.login({provider:n.toLowerCase(),onlyAuthorize:!0,success:function(){var e=(0,a.default)(o.default.mark((function e(t){var u;return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s["bind"+n]({code:t.code});case 2:return u=e.sent,u.errCode&&i.showToast({title:u.errMsg||"绑定失败",duration:3e3}),e.next=6,r.mutations.updateUserInfo();case 6:case"end":return e.stop()}}),e)})));function t(n){return e.apply(this,arguments)}return t}(),fail:function(){var e=(0,a.default)(o.default.mark((function e(n){return o.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(n),i.hideLoading();case 2:case"end":return e.stop()}}),e)})));function n(n){return e.apply(this,arguments)}return n}()});case 10:case"end":return u.stop()}}),u)})))()},realNameVerify:function(){i.navigateTo({url:"/uni_modules/uni-id-pages/pages/userinfo/realname-verify/realname-verify"})}}};n.default=c}).call(this,t(27)["default"],t(2)["default"])},219:function(e,n,t){"use strict";t.r(n);var i=t(220),u=t.n(i);for(var o in i)["default"].indexOf(o)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(o);n["default"]=u.a},220:function(e,n,t){}},[[213,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../../.sourcemap/mp-weixin/uni_modules/uni-id-pages/pages/userinfo/userinfo.js.map