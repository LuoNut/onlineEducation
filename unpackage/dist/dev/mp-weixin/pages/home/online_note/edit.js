(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/home/online_note/edit"],{507:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26),n(27);o(n(25));var i=o(n(508));t.__webpack_require_UNI_MP_PLUGIN__=n,e(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},508:function(t,e,n){"use strict";n.r(e);var o=n(509),i=n(511);for(var c in i)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(c);n(513);var r,s=n(46),a=Object(s["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],r);a.options.__file="pages/home/online_note/edit.vue",e["default"]=a.exports},509:function(t,e,n){"use strict";n.r(e);var o=n(510);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},510:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return i})),n.d(e,"staticRenderFns",(function(){return r})),n.d(e,"recyclableRender",(function(){return c})),n.d(e,"components",(function(){return o}));try{o={uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,770))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var t=this,e=t.$createElement;t._self._c},c=!1,r=[];i._withStripped=!0},511:function(t,e,n){"use strict";n.r(e);var o=n(512),i=n.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(c);e["default"]=i.a},512:function(t,e,n){"use strict";(function(t,o){var i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var c=i(n(28)),r=i(n(31)),s=(n(351),t.database()),a={data:function(){return{showTool:!1,showHeader:!1,showBold:!1,showItalic:!1,noteId:"",content:""}},onLoad:function(t){this.noteId=t.id,this.getOnteFun()},methods:{getOnteFun:function(){var t=this;return(0,r.default)(c.default.mark((function e(){var n;return c.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s.collection("online_note").where('"'.concat(t.noteId,'" == _id')).get();case 2:n=e.sent,t.content=n.result.data[0].content,t.editorCtx.setContents({html:n.result.data[0].content,success:function(e){t.content=e.html,console.log(n.result.data[0].content)}});case 5:case"end":return e.stop()}}),e)})))()},onSubmit:function(){var t=this;this.editorCtx.getContents({success:function(e){t.content=e.html,t.setData()}})},setData:function(){s.collection("online_note").update({content:this.content}).then((function(t){console.log(t),o.showToast({title:"上传成功",icon:"none"})}))},onfocus:function(){this.showTool=!0},onEditReady:function(){var t=this;o.createSelectorQuery().in(this).select(".myEdit").fields({size:!0,context:!0},(function(e){t.editorCtx=e.context})).exec()},clickDivider:function(){this.editorCtx.insertDivider()},clickHeader:function(){this.showHeader=!this.showHeader,this.editorCtx.format("header",!!this.showHeader&&"H1")},clickBold:function(){this.showBold=!this.showBold,this.editorCtx.format("bold")},clickItalic:function(){this.showItalic=!this.showItalic,this.editorCtx.format("italic")},clickInsertImage:function(){var e=this;o.chooseImage({success:function(n){o.showLoading({title:"上传中...",mask:!0}),n.tempFiles.forEach(function(){var n=(0,r.default)(c.default.mark((function n(i){var r;return c.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.uploadFile({filePath:i.path,cloudPath:i.name});case 2:r=n.sent,e.editorCtx.insertImage({src:r.fileID}),o.hideLoading();case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}})},okEdit:function(){this.showTool=!1},checkStatus:function(t,e,n){e.hasOwnProperty(t)?this[n]=!0:this[n]=!1},statuschange:function(t){var e=t.detail;this.checkStatus("header",e,"showHeader"),this.checkStatus("bold",e,"showBold"),this.checkStatus("italic",e,"showItalic")}}};e.default=a}).call(this,n(27)["default"],n(2)["default"])},513:function(t,e,n){"use strict";n.r(e);var o=n(514),i=n.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(c);e["default"]=i.a},514:function(t,e,n){}},[[507,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/home/online_note/edit.js.map