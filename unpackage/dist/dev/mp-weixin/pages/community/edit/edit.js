(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/community/edit/edit"],{354:function(t,e,n){"use strict";(function(t,e){var o=n(4);n(26),n(27);o(n(25));var r=o(n(355));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},355:function(t,e,n){"use strict";n.r(e);var o=n(356),r=n(358);for(var i in r)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(i);n(360);var c,s=n(46),a=Object(s["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],c);a.options.__file="pages/community/edit/edit.vue",e["default"]=a.exports},356:function(t,e,n){"use strict";n.r(e);var o=n(357);n.d(e,"render",(function(){return o["render"]})),n.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(e,"components",(function(){return o["components"]}))},357:function(t,e,n){"use strict";var o;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return c})),n.d(e,"recyclableRender",(function(){return i})),n.d(e,"components",(function(){return o}));try{o={uButton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-button/u-button")]).then(n.bind(null,770))}}}catch(s){if(-1===s.message.indexOf("Cannot find module")||-1===s.message.indexOf(".vue"))throw s;console.error(s.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var r=function(){var t=this,e=t.$createElement,n=(t._self._c,t.artobj.title.length);t.$mp.data=Object.assign({},{$root:{g0:n}})},i=!1,c=[];r._withStripped=!0},358:function(t,e,n){"use strict";n.r(e);var o=n(359),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},359:function(t,e,n){"use strict";(function(t,o){var r=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n(28)),c=r(n(31)),s=r(n(11)),a=n(351);function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,o)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){(0,s.default)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var d=t.database(),f={data:function(){return{showTool:!1,showHeader:!1,showBold:!1,showItalic:!1,artobj:{title:"",content:"",description:"",picurls:[],province:"",subject_type:""}}},onLoad:function(t){var e=this;this.artobj.subject_type=t.subject_type,(0,a.getProvince)().then((function(t){e.artobj.province=t}))},methods:{onSubmit:function(){var t=this;o.showLoading({title:"发布中..."}),this.editorCtx.getContents({success:function(e){t.artobj.content=e.html,t.artobj.description=e.text.slice(0,80),t.artobj.picurls=(0,a.getImgSrc)(e.html),t.setData()}})},setData:function(){d.collection("blog_article").add(l({},this.artobj)).then((function(t){o.hideLoading(),o.showToast({title:"发布成功"}),setTimeout((function(){o.navigateBack({delta:1})}),800)}))},onfocus:function(){this.showTool=!0},onEditReady:function(){var t=this;o.createSelectorQuery().in(this).select(".myEdit").fields({size:!0,context:!0},(function(e){t.editorCtx=e.context})).exec()},clickDivider:function(){this.editorCtx.insertDivider()},clickHeader:function(){this.showHeader=!this.showHeader,this.editorCtx.format("header",!!this.showHeader&&"H1")},clickBold:function(){this.showBold=!this.showBold,this.editorCtx.format("bold")},clickItalic:function(){this.showItalic=!this.showItalic,this.editorCtx.format("italic")},clickInsertImage:function(){var e=this;o.chooseImage({success:function(n){o.showLoading({title:"上传中...",mask:!0}),n.tempFiles.forEach(function(){var n=(0,c.default)(i.default.mark((function n(r){var c;return i.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.uploadFile({filePath:r.path,cloudPath:r.name});case 2:c=n.sent,e.editorCtx.insertImage({src:c.fileID}),o.hideLoading();case 5:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}})},okEdit:function(){this.showTool=!1},checkStatus:function(t,e,n){e.hasOwnProperty(t)?this[n]=!0:this[n]=!1},statuschange:function(t){var e=t.detail;this.checkStatus("header",e,"showHeader"),this.checkStatus("bold",e,"showBold"),this.checkStatus("italic",e,"showItalic")}}};e.default=f}).call(this,n(27)["default"],n(2)["default"])},360:function(t,e,n){"use strict";n.r(e);var o=n(361),r=n.n(o);for(var i in o)["default"].indexOf(i)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=r.a},361:function(t,e,n){}},[[354,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/community/edit/edit.js.map