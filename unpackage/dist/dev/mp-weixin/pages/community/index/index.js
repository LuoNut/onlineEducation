(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/community/index/index"],{337:function(e,t,n){"use strict";(function(e,t){var o=n(4);n(26),n(27);o(n(25));var i=o(n(338));e.__webpack_require_UNI_MP_PLUGIN__=n,t(i.default)}).call(this,n(1)["default"],n(2)["createPage"])},338:function(e,t,n){"use strict";n.r(t);var o=n(339),i=n(341);for(var r in i)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(r);n(343);var a,c=n(46),u=Object(c["default"])(i["default"],o["render"],o["staticRenderFns"],!1,null,"da6333f4",null,!1,o["components"],a);u.options.__file="pages/community/index/index.vue",t["default"]=u.exports},339:function(e,t,n){"use strict";n.r(t);var o=n(340);n.d(t,"render",(function(){return o["render"]})),n.d(t,"staticRenderFns",(function(){return o["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return o["recyclableRender"]})),n.d(t,"components",(function(){return o["components"]}))},340:function(e,t,n){"use strict";var o;n.r(t),n.d(t,"render",(function(){return i})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return r})),n.d(t,"components",(function(){return o}));try{o={uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,690))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,698))},uSkeleton:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-skeleton/u-skeleton")]).then(n.bind(null,707))},blogItem:function(){return Promise.all([n.e("common/vendor"),n.e("components/blog-item/blog-item")]).then(n.bind(null,715))},uniLoadMore:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-load-more/components/uni-load-more/uni-load-more")]).then(n.bind(null,722))}}}catch(c){if(-1===c.message.indexOf("Cannot find module")||-1===c.message.indexOf(".vue"))throw c;console.error(c.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var i=function(){var e=this,t=e.$createElement;e._self._c},r=!1,a=[];i._withStripped=!0},341:function(e,t,n){"use strict";n.r(t);var o=n(342),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},342:function(e,t,n){"use strict";(function(e,o){var i=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(28)),a=i(n(18)),c=i(n(31)),u=n(42),s=e.database(),l=s.command,d={data:function(){return{show:!1,subject_type:"computer",navList:[{name:"计算机",subject_type:"computer"},{name:"理学,工学,农学",subject_type:"ScienceEngineeringAgronomy"},{name:"外语",subject_type:"foreignLanguages"},{name:"心理学",subject_type:"fpsychology"},{name:"文史哲学",subject_type:"LiteratureHistoryPhilosophy"},{name:"音乐与艺术",subject_type:"MusicAndArt"},{name:"医学与保健",subject_type:"MedicineHealthCare"},{name:"教育教学",subject_type:"educationTeaching"}],loadingState:!0,navActive:0,articleData:[],uniLoad:"more",isBottomLoading:!1,noMore:!1}},onReachBottom:function(){this.ReachBottom()},onLoad:function(){this.getArticleData()},onShow:function(){this.getArticleData()},methods:{showNavAll:function(){this.show=!this.show},close:function(){this.show=!1},ReachBottom:function(){this.isBottomLoading=!0,this.uniLoad="loading",this.noMore?this.uniLoad="noMore":this.getArticleData()},P_delEvent:function(){this.articleData=[],this.getArticleData()},getArticleData:function(){var t=this;return(0,c.default)(r.default.mark((function n(){var o,i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return o=s.collection("blog_article").where("delState != true && '".concat(t.subject_type,"' == subject_type")).field("user_id,like_count,view_count,comment_count,title,publish_date,description,picurls,province").getTemp(),n.next=3,s.collection("uni-id-users").field("_id,username,nickname,avatar_file").getTemp();case 3:i=n.sent,s.collection(o,i).orderBy(t.navList[t.navActive].type,"desc").skip(t.articleData.length).limit(5).get().then(function(){var n=(0,c.default)(r.default.mark((function n(o){var i,c,d,f;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.loadingState=!1,o.result.data.length){n.next=5;break}return t.ReachBottom(),t.noMore=!0,n.abrupt("return");case 5:if(i=t.articleData,c=[],d=[].concat((0,a.default)(i),(0,a.default)(o.result.data)),!u.store.hasLogin){n.next=16;break}return d.forEach((function(e){c.push(e._id)})),console.log(c),n.next=13,s.collection("blog_like").where({article_id:l.in(c),user_id:e.getCurrentUserInfo().uid}).get();case 13:f=n.sent,console.log(f),f.result.data.forEach((function(e){var t=d.findIndex((function(t){return e.article_id===t._id}));console.log(t),d[t].isLike=!0}));case 16:t.articleData=d,t.loadingState=!1,console.log(d);case 19:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}());case 5:case"end":return n.stop()}}),n)})))()},navClick:function(e){this.show=!1,this.subject_type=e.subject_type,console.log(this.subject_type),this.loadingState=!0,this.articleData=[],this.navActive=e.index,this.getArticleData(),this.uniLoad="more",this.noMore=!1,this.isBottomLoading=!1},toEdit:function(){o.navigateTo({url:"/pages/community/edit/edit?subject_type="+this.subject_type})}}};t.default=d}).call(this,n(27)["default"],n(2)["default"])},343:function(e,t,n){"use strict";n.r(t);var o=n(344),i=n.n(o);for(var r in o)["default"].indexOf(r)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(r);t["default"]=i.a},344:function(e,t,n){}},[[337,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/community/index/index.js.map